# ğŸ¯ å®Œæˆéƒ¨ç½² - æœ€åæ­¥éª¤

## âœ… å½“å‰çŠ¶æ€
- æ–‡ä»¶å·²ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼š`/opt/syncekp-web`
- Docker æ„å»ºæ­£åœ¨è¿›è¡Œä¸­ï¼ˆä¸‹è½½ .NET SDK 173MBï¼‰

## ğŸ“ ä½ éœ€è¦åœ¨SSHç»ˆç«¯ä¸­æ‰§è¡Œçš„å‘½ä»¤

### æ–¹æ³•1ï¼šä¸€é”®å®Œæˆï¼ˆæ¨èï¼‰

åœ¨ä½ çš„SSHç»ˆç«¯ï¼ˆ`root@172.16.10.110`ï¼‰ä¸­ï¼Œå¤åˆ¶ç²˜è´´ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
cd /opt/syncekp-web && \
docker compose up -d && \
sleep 5 && \
echo "=== å®¹å™¨çŠ¶æ€ ===" && \
docker ps | grep syncekp && \
echo "" && \
echo "=== åº”ç”¨æ—¥å¿— ===" && \
docker logs --tail 30 syncekp-casdoor-web && \
echo "" && \
echo "========================================" && \
echo "éƒ¨ç½²å®Œæˆï¼è®¿é—®: http://172.16.10.110:9000" && \
echo "========================================"
```

### æ–¹æ³•2ï¼šåˆ†æ­¥æ‰§è¡Œ

#### ç¬¬1æ­¥ï¼šè¿›å…¥ç›®å½•
```bash
cd /opt/syncekp-web
```

#### ç¬¬2æ­¥ï¼šå¯åŠ¨å®¹å™¨ï¼ˆå¦‚æœæ„å»ºæœªå®Œæˆï¼Œä¼šè‡ªåŠ¨æ„å»ºï¼‰
```bash
docker compose up -d
```

#### ç¬¬3æ­¥ï¼šç­‰å¾…å¯åŠ¨
```bash
sleep 5
```

#### ç¬¬4æ­¥ï¼šæ£€æŸ¥çŠ¶æ€
```bash
docker ps | grep syncekp
```

#### ç¬¬5æ­¥ï¼šæŸ¥çœ‹æ—¥å¿—
```bash
docker logs --tail 30 syncekp-casdoor-web
```

## ğŸ” éªŒè¯éƒ¨ç½²

### æ£€æŸ¥å®¹å™¨æ˜¯å¦è¿è¡Œ
```bash
docker ps | grep syncekp
```

åº”è¯¥çœ‹åˆ°ï¼š
```
syncekp-casdoor-web   Up X seconds   0.0.0.0:9000->9000/tcp
```

### æŸ¥çœ‹å®æ—¶æ—¥å¿—
```bash
docker logs -f syncekp-casdoor-web
```

æŒ‰ `Ctrl+C` é€€å‡ºæ—¥å¿—æŸ¥çœ‹

### æµ‹è¯•è®¿é—®
åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
- http://172.16.10.110:9000
- http://syn-ekp.fzcsps.com:9000

åº”è¯¥çœ‹åˆ°ç™»å½•é¡µé¢ï¼

## âš ï¸ å¦‚æœé‡åˆ°é—®é¢˜

### é—®é¢˜1ï¼šæ„å»ºè¿˜åœ¨è¿›è¡Œä¸­
```bash
# æŸ¥çœ‹æ„å»ºè¿›åº¦
docker compose build

# ç­‰å¾…æ„å»ºå®Œæˆåå†å¯åŠ¨
docker compose up -d
```

### é—®é¢˜2ï¼šå®¹å™¨å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker logs syncekp-casdoor-web

# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰
docker ps -a | grep syncekp

# é‡æ–°å¯åŠ¨
docker restart syncekp-casdoor-web
```

### é—®é¢˜3ï¼šç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tulpn | grep 9000

# åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
kill -9 <PID>

# é‡æ–°å¯åŠ¨å®¹å™¨
docker restart syncekp-casdoor-web
```

### é—®é¢˜4ï¼šéœ€è¦é‡æ–°æ„å»º
```bash
cd /opt/syncekp-web

# åœæ­¢å®¹å™¨
docker stop syncekp-casdoor-web
docker rm syncekp-casdoor-web

# æ¸…ç†æ—§é•œåƒ
docker rmi syncekp-web-syncekp-web

# é‡æ–°æ„å»º
docker compose build --no-cache

# å¯åŠ¨
docker compose up -d
```

## ğŸ“Š å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps | grep syncekp

# æŸ¥çœ‹æ—¥å¿—ï¼ˆæœ€å50è¡Œï¼‰
docker logs --tail 50 syncekp-casdoor-web

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker logs -f syncekp-casdoor-web

# é‡å¯å®¹å™¨
docker restart syncekp-casdoor-web

# åœæ­¢å®¹å™¨
docker stop syncekp-casdoor-web

# å¯åŠ¨å®¹å™¨
docker start syncekp-casdoor-web

# æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯
docker inspect syncekp-casdoor-web

# è¿›å…¥å®¹å™¨å†…éƒ¨
docker exec -it syncekp-casdoor-web /bin/bash

# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats syncekp-casdoor-web
```

## ğŸ”’ Casdoor ç™»å½•æµ‹è¯•

1. è®¿é—® http://172.16.10.110:9000
2. ç‚¹å‡»"é€šè¿‡ Casdoor ç™»å½•"
3. ä¼šè·³è½¬åˆ° http://sso.fzcsps.com
4. ä½¿ç”¨ built-in ç»„ç»‡çš„ç”¨æˆ·ç™»å½•
5. ç™»å½•æˆåŠŸåè·³è½¬å›åº”ç”¨

## ğŸ“± é˜²ç«å¢™é…ç½®ï¼ˆå¦‚æœæ— æ³•è®¿é—®ï¼‰

```bash
# CentOS/RHEL
firewall-cmd --permanent --add-port=9000/tcp
firewall-cmd --reload

# Ubuntu/Debian
ufw allow 9000/tcp
ufw reload

# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
firewall-cmd --list-ports  # CentOS
ufw status                 # Ubuntu
```

## ğŸ‰ æˆåŠŸæ ‡å¿—

å½“ä½ çœ‹åˆ°ä»¥ä¸‹å†…å®¹æ—¶ï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸï¼š

1. `docker ps` æ˜¾ç¤ºå®¹å™¨çŠ¶æ€ä¸º `Up`
2. æ—¥å¿—ä¸­çœ‹åˆ° `Now listening on: http://[::]:9000`
3. æµè§ˆå™¨èƒ½è®¿é—®ç™»å½•é¡µé¢
4. ç‚¹å‡»ç™»å½•æŒ‰é’®èƒ½è·³è½¬åˆ° Casdoor

---

**ç°åœ¨è¯·åœ¨ä½ çš„SSHç»ˆç«¯ä¸­æ‰§è¡Œä¸Šè¿°å‘½ä»¤å®Œæˆéƒ¨ç½²ï¼** ğŸš€
