# ğŸ‰ è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²å·²å‡†å¤‡å°±ç»ª

## âœ… éƒ¨ç½²æ–‡ä»¶å·²åˆ›å»ºå¹¶åŒæ­¥

**æäº¤æ—¶é—´**: 2025å¹´10æœˆ31æ—¥  
**æäº¤**: a784ac7  
**ç›®æ ‡æœåŠ¡å™¨**: 172.16.10.110

---

## ğŸ“¦ éƒ¨ç½²æ–‡ä»¶æ¸…å•

### 1. è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
- âœ… **auto-deploy-server.sh** - Linuxéƒ¨ç½²è„šæœ¬(Bash)
  - è‡ªåŠ¨å®‰è£…Gitå’Œ.NET 8.0
  - è‡ªåŠ¨å…‹éš†/æ›´æ–°ä»£ç 
  - è‡ªåŠ¨ç¼–è¯‘å‘å¸ƒ
  - é…ç½®systemdæœåŠ¡

### 2. Windowså·¥å…·
- âœ… **deploy-server.bat** - ä¸€é”®éƒ¨ç½²æ‰¹å¤„ç†æ–‡ä»¶
- âœ… **quick-deploy-server.ps1** - PowerShellå¿«é€Ÿéƒ¨ç½²
- âœ… **remote-deploy.ps1** - å®Œæ•´è¿œç¨‹ç®¡ç†å·¥å…·

### 3. æ–‡æ¡£
- âœ… **è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—.md** - å®Œæ•´éƒ¨ç½²æ–‡æ¡£

---

## ğŸš€ ç°åœ¨å¯ä»¥å¼€å§‹éƒ¨ç½²äº†!

### æ–¹å¼1: Windowsæ‰¹å¤„ç† (æ¨è) âš¡

åŒå‡»æˆ–è¿è¡Œ:
```cmd
deploy-server.bat
```

**éœ€è¦è¾“å…¥å¯†ç 2æ¬¡**: `fzwater@163.com`

### æ–¹å¼2: PowerShell

```powershell
powershell -ExecutionPolicy Bypass -File quick-deploy-server.ps1
```

### æ–¹å¼3: æ‰‹åŠ¨SSH

```bash
# 1. ä¸Šä¼ è„šæœ¬
scp auto-deploy-server.sh root@172.16.10.110:/tmp/auto-deploy.sh

# 2. SSHç™»å½•å¹¶æ‰§è¡Œ
ssh root@172.16.10.110
chmod +x /tmp/auto-deploy.sh
/tmp/auto-deploy.sh
```

---

## ğŸ“‹ éƒ¨ç½²ä¿¡æ¯

| é¡¹ç›® | ä¿¡æ¯ |
|------|------|
| **æœåŠ¡å™¨IP** | 172.16.10.110 |
| **ç”¨æˆ·å** | root |
| **å¯†ç ** | fzwater@163.com |
| **è®¿é—®ç«¯å£** | 5233 |
| **è®¿é—®åœ°å€** | http://172.16.10.110:5233/login |
| **æœåŠ¡åç§°** | ekp-casdoor-sync |

---

## ğŸ”„ éƒ¨ç½²æµç¨‹

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆ:

1. âœ… æ£€æŸ¥å¹¶å®‰è£…Git
2. âœ… æ£€æŸ¥å¹¶å®‰è£….NET 8.0 SDK  
3. âœ… ä»GitHubå…‹éš†/æ›´æ–°ä»£ç 
4. âœ… ç¼–è¯‘å‘å¸ƒåº”ç”¨
5. âœ… é…ç½®systemdæœåŠ¡
6. âœ… å¯åŠ¨åº”ç”¨æœåŠ¡
7. âœ… æ˜¾ç¤ºçŠ¶æ€å’Œè®¿é—®åœ°å€

**é¢„è®¡æ—¶é—´**: 5-10åˆ†é’Ÿ(é¦–æ¬¡éƒ¨ç½²,åŒ…å«å®‰è£…ä¾èµ–)

---

## ğŸŒ éƒ¨ç½²åè®¿é—®

```
http://172.16.10.110:5233/login
```

**æµ‹è¯•è´¦å·**:
- ç”¨æˆ·å: admin
- å¯†ç : 123
- ç»„ç»‡: built-in

---

## ğŸ› ï¸ æœåŠ¡ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹çŠ¶æ€
```bash
ssh root@172.16.10.110 "systemctl status ekp-casdoor-sync"
```

### æŸ¥çœ‹æ—¥å¿—
```bash
ssh root@172.16.10.110 "journalctl -u ekp-casdoor-sync -f"
```

### é‡å¯æœåŠ¡
```bash
ssh root@172.16.10.110 "systemctl restart ekp-casdoor-sync"
```

---

## âš™ï¸ éƒ¨ç½²åé…ç½®

### 1. ç¼–è¾‘é…ç½®æ–‡ä»¶

```bash
ssh root@172.16.10.110
nano ~/ekp-casdoor-sync/SyncEkpToCasdoor_webdocker/SyncEkpToCasdoor.Web/appsettings.json
```

### 2. ä¿®æ”¹æ•°æ®åº“è¿æ¥

```json
{
  "EkpConnection": "Server=ä½ çš„æ•°æ®åº“IP,1433;Database=ecology;User Id=sa;Password=ä½ çš„å¯†ç ;TrustServerCertificate=true"
}
```

### 3. é‡å¯æœåŠ¡
```bash
systemctl restart ekp-casdoor-sync
```

---

## âœ… éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡
```bash
systemctl status ekp-casdoor-sync
```
åº”æ˜¾ç¤º: **active (running)** âœ…

### 2. æ£€æŸ¥ç«¯å£
```bash
netstat -tulpn | grep 5233
```
åº”æ˜¾ç¤º: **LISTEN** âœ…

### 3. æµ‹è¯•è®¿é—®
æµè§ˆå™¨æ‰“å¼€: http://172.16.10.110:5233/login

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| `è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—.md` | å®Œæ•´éƒ¨ç½²æ–‡æ¡£ |
| `auto-deploy-server.sh` | Linuxéƒ¨ç½²è„šæœ¬ |
| `deploy-server.bat` | Windowsæ‰¹å¤„ç† |
| `æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—.md` | é€šç”¨æœåŠ¡å™¨æŒ‡å— |
| `Dockeréƒ¨ç½²æŒ‡å—.md` | Dockerå®¹å™¨éƒ¨ç½² |

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: è¿è¡Œéƒ¨ç½²
```cmd
deploy-server.bat
```

### æ­¥éª¤2: è¾“å…¥å¯†ç 
```
fzwater@163.com
```
(éœ€è¦è¾“å…¥2æ¬¡)

### æ­¥éª¤3: ç­‰å¾…å®Œæˆ
çº¦5-10åˆ†é’Ÿ

### æ­¥éª¤4: è®¿é—®åº”ç”¨
```
http://172.16.10.110:5233/login
```

### æ­¥éª¤5: é…ç½®æ•°æ®åº“(å¯é€‰)
```bash
ssh root@172.16.10.110
nano ~/ekp-casdoor-sync/.../appsettings.json
systemctl restart ekp-casdoor-sync
```

---

## ğŸŠ æ€»ç»“

âœ… **éƒ¨ç½²è„šæœ¬å·²å°±ç»ª**  
âœ… **æ‰€æœ‰æ–‡ä»¶å·²åŒæ­¥åˆ°GitHub**  
âœ… **æ–‡æ¡£å®Œæ•´è¯¦ç»†**  
âœ… **æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼**  
âœ… **ä¸€é”®è‡ªåŠ¨åŒ–éƒ¨ç½²**  

**ç°åœ¨å¯ä»¥ç«‹å³éƒ¨ç½²åˆ°æœåŠ¡å™¨ 172.16.10.110!**

---

**å¿«é€Ÿéƒ¨ç½²å‘½ä»¤**: `deploy-server.bat`  
**è®¿é—®åœ°å€**: http://172.16.10.110:5233/login
